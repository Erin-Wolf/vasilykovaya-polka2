<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Корзина — Васильковая полка</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<!-- ===== ШАПКА ===== -->
<header class="header">
    <div class="logo">
        <h1>Васильковая полка</h1>
    </div>
    <nav class="navigation">
        <a href="index.html">Главная</a>
        <a href="menu.html">Меню</a>
        <a href="cart.html" style="color:#3a9f7a;">Корзина</a>
    </nav>
</header>

<!-- ===== КОРЗИНА ===== -->
<section class="cart-page">
    <h2>Корзина</h2>

    <!-- Если корзина пустая -->
    <p id="empty-cart">Ваша корзина пуста</p>

    <!-- Список товаров -->
    <div id="cart-items"></div>

    <!-- Итог -->
    <div id="cart-summary" style="display:none;">
        <h3>Итого: <span id="total-price">0</span> BYN</h3>

        <!-- Форма -->
        <form id="order-form">
            <input type="text" placeholder="Имя" required>
            <input type="tel" placeholder="Телефон" required>
            <input type="email" placeholder="Email" required>

            <button type="submit">Оформить заказ</button>
        </form>
    </div>
</section>

<!-- ===== FOOTER ===== -->
<footer class="footer">
    <p>© 2026 «Васильковая полка»</p>
</footer>

<!-- ===== JS ===== -->
<script>
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    const cartItems = document.getElementById("cart-items");
    const emptyText = document.getElementById("empty-cart");
    const cartSummary = document.getElementById("cart-summary");
    const totalPriceEl = document.getElementById("total-price");

    function renderCart() {
        cartItems.innerHTML = "";
        let total = 0;

        if (cart.length === 0) {
            emptyText.style.display = "block";
            cartSummary.style.display = "none";
            return;
        }

        emptyText.style.display = "none";
        cartSummary.style.display = "block";

        cart.forEach((item, index) => {
            total += item.price * item.quantity;

            const div = document.createElement("div");
            div.className = "cart-item";

            div.innerHTML = `
                <img src="${item.image}" alt="${item.name}">
                <div class="cart-info">
                    <h4>${item.name}</h4>
                    <p>${item.price} BYN</p>
                    <input type="number" min="1" value="${item.quantity}" 
                        onchange="updateQuantity(${index}, this.value)">
                    <button onclick="removeItem(${index})">Удалить</button>
                </div>
            `;

            cartItems.appendChild(div);
        });

        totalPriceEl.textContent = total;
    }

    function updateQuantity(index, value) {
        cart[index].quantity = parseInt(value);
        localStorage.setItem("cart", JSON.stringify(cart));
        renderCart();
    }

    function removeItem(index) {
        cart.splice(index, 1);
        localStorage.setItem("cart", JSON.stringify(cart));
        renderCart();
    }

    document.getElementById("order-form").addEventListener("submit", function(e) {
        e.preventDefault();

        const orderNumber = "VP-" + Math.floor(Math.random() * 10000);
        alert("Заказ оформлен! Номер заказа: " + orderNumber);

        localStorage.removeItem("cart");
        cart = [];
        renderCart();
    });

    renderCart();
</script>

</body>
</html>
